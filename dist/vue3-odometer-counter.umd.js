(function(u,F){typeof exports=="object"&&typeof module!="undefined"?module.exports=F(require("vue")):typeof define=="function"&&define.amd?define(["vue"],F):(u=typeof globalThis!="undefined"?globalThis:u||self,u.Vue3Odometer=F(u.Vue))})(this,function(u){"use strict";function F(m){var g=typeof m;return m!=null&&(g=="object"||g=="function")}const Q=["[object AsyncFunction]","[object Function]","[object GeneratorFunction]","[object Proxy]"];function a(m){if(!F(m))return!1;var g=Object.prototype.toString.call(m);return Q.includes(g)}var I={exports:{}};(function(m,g){const p='<span class="odometer-ribbon"><span class="odometer-ribbon-inner">'+'<span class="odometer-value"></span>'+"</span></span>",i='<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner">'+p+"</span></span>",S='<span class="odometer-formatting-mark"></span>',R="(,ddd).dd",w=0,L=/^\(?([^)]*)\)?(?:(.)(D*)(d*))?$/,O=30,H=2e3,N=20,k=2,q=.5,W=1e3/O,U=1e3/N,j="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",x=s=>{const t=document.createElement("div");return t.innerHTML=s,t.children[0]},_=(s,...t)=>s.classList.remove(...t),M=(s,...t)=>(_(s,...t),s.classList.add(...t)),C=(s,t)=>s.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:!0})),T=()=>window.performance.now(),B=(s,t=0)=>t?(s*=Math.pow(10,t),s+=.5,s=Math.floor(s),s/Math.pow(10,t)):Math.round(s),A=s=>s<0?Math.ceil(s):Math.floor(s);class l{constructor(t){if(this.options=t,this.el=this.options.el,this.el.odometer)return this.el.odometer;this.el.odometer=this;for(let r in l.options){const e=l.options[r];this.options[r]==null&&(this.options[r]=e)}this.options.duration==null&&(this.options.duration=H),this.MAX_VALUES=this.options.duration/W/k|0,this.resetFormat(),this.value=this.cleanValue(this.options.value!=null?this.options.value:""),this.renderInside(),this.render();try{for(let r of["innerHTML","innerText","textContent"])this.el[r]!=null&&(e=>Object.defineProperty(this.el,e,{get:()=>e==="innerHTML"?this.inside.outerHTML:this.inside.innerText!=null?this.inside.innerText:this.inside.textContent,set:n=>this.update(n)}))(r)}catch{this.watchForMutations()}}static init(){const t=document.querySelectorAll(l.options.selector||".odometer");return Array.from(t).map(r=>r.odometer=new l({el:r,value:r.innerText!=null?r.innerText:r.textContent}))}renderInside(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)}watchForMutations(){try{return this.observer||(this.observer=new MutationObserver(t=>{const r=this.el.innerText;return this.renderInside(),this.render(this.value),this.update(r)})),this.watchMutations=!0,this.startWatchingMutations()}catch{}}startWatchingMutations(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})}stopWatchingMutations(){return this.observer&&this.observer.disconnect()}cleanValue(t){return typeof t=="string"&&(t=t.replace(this.format.radix||".","<radix>"),t=t.replace(/[.,]/g,""),t=t.replace("<radix>","."),t=parseFloat(t,10)||0),B(t,this.format.precision)}bindTransitionEnd(){if(this.transitionEndBound)return;this.transitionEndBound=!0;let t=!1;return j.split(" ").map(r=>this.el.addEventListener(r,()=>(t||(t=!0,setTimeout(()=>(this.render(),t=!1,C(this.el,"odometerdone")),0)),!0)))}resetFormat(){let t=this.options.format||R;t||(t="d");const r=L.exec(t);if(!r)throw new Error("Odometer: Unparsable digit format");const[e,n,o,d]=r.slice(1,5);let c=o?o.length:0;const v=c+(d?d.length:0);return this.format={repeating:e,radix:n,precision:v,fractional:c}}render(t=this.value){this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="";let{theme:r}=this.options;const e=[];for(let o of this.el.classList)if(o.length){var n;if(n=/^odometer-theme-(.+)$/.exec(o)){r=n[1];continue}if(/^odometer(-|$)/.test(o))continue;e.push(o)}return e.push("odometer"),r?e.push(`odometer-theme-${r}`):e.push("odometer-auto-theme"),this.el.className=e.join(" "),this.ribbons={},this.formatDigits(t),this.startWatchingMutations()}formatDigits(t){let r;if(this.digits=[],this.options.formatFunction){const e=this.options.formatFunction(t);for(let n of e.split("").reverse())n.match(/[0-9]/)?(r=this.renderDigit(),r.querySelector(".odometer-value").innerHTML=n,this.digits.push(r),this.insertDigit(r)):this.addSpacer(n)}else{let e=Math.abs(t),n=Math.max(this.format.fractional,this.getFractionalDigitCount(e));n&&(e=Math.round(e*Math.pow(10,n)));let o=0;for(;e>0;)this.addDigit((e%10).toString(),o>=n),e=Math.floor(e/10),o++,o===n&&this.addDigit(".",!0);let d=this.options.minIntegerLength||w,c=o-n;for(;c++<d;)this.addDigit(0,!0);t<0&&this.addDigit("-",!0)}}update(t){let r=t-this.value;if(t=this.cleanValue(t),!!r)return _(this.el,"odometer-animating-up","odometer-animating-down","odometer-animating"),r>0?M(this.el,"odometer-animating-up"):M(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(t),this.startWatchingMutations(),setTimeout(()=>(this.el.offsetHeight,M(this.el,"odometer-animating")),0),this.value=t}renderDigit(){return x(i)}insertDigit(t,r){return r!=null?this.inside.insertBefore(t,r):this.inside.children.length?this.inside.insertBefore(t,this.inside.children[0]):this.inside.appendChild(t)}addSpacer(t,r,...e){const n=x(S);return n.innerHTML=t,e&&M(n,...e),this.insertDigit(n,r)}addDigit(t,r=!0){if(t==="-")return this.addSpacer(t,null,"odometer-negation-mark");if(t===".")return this.addSpacer(this.format.radix||".",null,"odometer-radix-mark");if(r){let n=!1;for(;;){if(!this.format.repeating.length){if(n)throw new Error("Bad odometer format without digits");this.resetFormat(),n=!0}const o=this.format.repeating[this.format.repeating.length-1];if(this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),o==="d")break;this.addSpacer(o)}}const e=this.renderDigit();return e.querySelector(".odometer-value").innerHTML=t,this.digits.push(e),this.insertDigit(e)}animate(t){return this.options.animation==="count"?this.animateCount(t):this.animateSlide(t)}animateCount(t){let r=+t-this.value,e=T(),n;if(!r)return;const o=e;let d=this.value;return(n=()=>{if(T()-o>this.options.duration)return this.value=t,this.render(),C(this.el,"odometerdone");const c=T()-e;if(c>U){e=T();const v=c/this.options.duration;d+=r*v,this.render(Math.round(d))}return requestAnimationFrame(n)})()}getDigitCount(...t){for(let e=0;e<t.length;e++){const n=t[e];t[e]=Math.abs(n)}const r=Math.max(...t);return Math.ceil(Math.log(r+1)/Math.log(10))}getFractionalDigitCount(...t){const r=/^\-?\d*\.(\d*?)0*$/;for(let e=0;e<t.length;e++){const n=t[e];t[e]=n.toString();const o=r.exec(t[e]);o?t[e]=o[1].length:t[e]=0}return Math.max(...t)}resetDigits(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()}animateSlide(t){let r,e,n,o,d,c,v,D,E=this.value;const b=Math.max(this.format.fractional,this.getFractionalDigitCount(E,t));if(b&&(t=Math.round(t*Math.pow(10,b)),E=Math.round(E*Math.pow(10,b))),!(r=t-E))return;this.bindTransitionEnd();let Y=this.options.minIntegerLength||w;const V=Math.max(this.getDigitCount(E,t),Y+b),K=[];let z=0;for(D=0,o=D,v=V,c=0<=v;c?D<v:D>v;c?D++:D--,o=D){d=A(E/Math.pow(10,V-o-1));const h=A(t/Math.pow(10,V-o-1)),f=h-d;if(Math.abs(f)>this.MAX_VALUES){n=[];const Z=f/(this.MAX_VALUES+this.MAX_VALUES*z*q);let y=d;for(;f>0&&y<h||f<0&&y>h;)n.push(Math.round(y)),y+=Z;n[n.length-1]!==h&&n.push(h),z++}else n=P(d,h,!0);for(o=0;o<n.length;o++)e=n[o],n[o]=Math.abs(e%10);K.push(n)}this.resetDigits();const J=K.reverse();for(o=0;o<J.length;o++){n=J[o],this.digits[o]||this.addDigit(" ",o>=b),this.ribbons[o]==null&&(this.ribbons[o]=this.digits[o].querySelector(".odometer-ribbon-inner")),this.ribbons[o].innerHTML="",r<0&&(n=n.reverse());for(let h=0;h<n.length;h++){e=n[h];const f=document.createElement("div");f.className="odometer-value",f.innerHTML=e,this.ribbons[o].appendChild(f),h===n.length-1&&M(f,"odometer-last-value"),h===0&&M(f,"odometer-first-value")}}d<0&&this.addDigit("-");const G=this.inside.querySelector(".odometer-radix-mark");if(G&&G.parent.removeChild(G),b)return this.addSpacer(this.format.radix,this.digits[b-1],"odometer-radix-mark")}}l.options=window.odometerOptions||{},document.addEventListener("DOMContentLoaded",()=>{if(l.options.auto!==!1)return l.init()}),g!=null?m.exports=l:window.Odometer=l;function P(s,t,r){let e=[],n=s<t?1:-1,o=r?t+n:t;for(;s!==o;)e.push(s),s+=n;return e}})(I,I.exports);var $=I.exports;return u.defineComponent({__name:"Odometer",props:{value:{type:Number,required:!1,default:0},format:{type:String,required:!1},theme:{type:String,required:!1,default:"default"},duration:{type:Number,required:!1},animation:{type:String,required:!1},formatFunction:{type:Function,required:!1}},emits:["ready"],setup(m,{expose:g,emit:X}){const p=m,i=u.ref(null),S=u.ref(null);u.watch(()=>p.value,e=>{i.value&&a(i.value.update)&&i.value.update(e)},{deep:!1});function R(){typeof window!="undefined"&&(window.odometerOptions?window.odometerOptions.auto=!1:window.odometerOptions={auto:!1})}function w(){if(i.value)return;R();const e=new $({el:S.value,value:p.value,format:p.format,theme:p.theme,duration:p.duration,animation:p.animation,formatFunction:p.formatFunction});e.render(),X("ready",e,$),i.value=e}function L(){i.value=null}function O(){i.value&&a(i.value.renderInside)&&i.value.renderInside()}function H(){i.value&&a(i.value.watchForMutations)&&i.value.watchForMutations()}function N(){i.value&&a(i.value.startWatchingMutations)&&i.value.startWatchingMutations()}function k(){i.value&&a(i.value.stopWatchingMutations)&&i.value.stopWatchingMutations()}function q(e){i.value&&a(i.value.cleanValue)&&i.value.cleanValue(e)}function W(){i.value&&a(i.value.bindTransitionEnd)&&i.value.bindTransitionEnd()}function U(){i.value&&a(i.value.resetFormat)&&i.value.resetFormat()}function j(){i.value&&a(i.value.renderDigit)&&i.value.renderDigit()}function x(e){i.value&&a(i.value.formatDigits)&&i.value.formatDigits(e)}function _(e,n){i.value&&a(i.value.insertDigit)&&i.value.insertDigit(e,n)}function M(e,n){i.value&&a(i.value.addDigit)&&i.value.addDigit(e,n)}function C(e,n,o){i.value&&a(i.value.addSpacer)&&i.value.addSpacer(e,n,o)}function T(e){i.value&&a(i.value.animate)&&i.value.animate(e)}function B(e){i.value&&a(i.value.animateCount)&&i.value.animateCount(e)}function A(){i.value&&a(i.value.getDigitCount)&&i.value.getDigitCount()}function l(){i.value&&a(i.value.getFractionalDigitCount)&&i.value.getFractionalDigitCount()}function P(){i.value&&a(i.value.resetDigits)&&i.value.resetDigits()}function s(e){i.value&&a(i.value.animateSlide)&&i.value.animateSlide(e)}function t(e){i.value&&a(i.value.render)&&i.value.render(e)}function r(e){i.value&&a(i.value.update)&&i.value.update(e)}return u.onMounted(()=>{w()}),u.onUnmounted(()=>{L()}),g({instance:i,init:w,uninit:L,renderInside:O,watchForMutations:H,startWatchingMutations:N,stopWatchingMutations:k,cleanValue:q,bindTransitionEnd:W,resetFormat:U,renderDigit:j,formatDigits:x,insertDigit:_,addDigit:M,addSpacer:C,animate:T,animateCount:B,getDigitCount:A,getFractionalDigitCount:l,resetDigits:P,animateSlide:s,render:t,update:r}),(e,n)=>(u.openBlock(),u.createElementBlock("span",{ref_key:"numRef",ref:S},null,512))}})});
